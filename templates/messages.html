{% extends "base.html" %}
{% block content %}
<h3 class="center-align teal-text text-darken-4">Messages</h3>

<div class="row">
    <div class="col s10 offset-s1">
        <ul class="collapsible messages">
            {% for message in messages %}
            <li>
                <div class="collapsible-header teal darken-4 white-text">
                    <i class="material-icons">email</i>
                    {{ message.user_name }} : {{ message.message_date.day }}/{{ message.message_date.month }}/{{ message.message_date.year }}
                    <a href="#modal{{ loop.index }}" class="modal-trigger red-text text-darken-2"><i class="material-icons right">delete</i></a>
                </div>
                <div class="collapsible-body">
                    <p>{{ message.message_content }}</p>
                    <p>{{ message.user_email }}</p>
                    <p>{{ message.message_date.hour }}:{{ message.message_date.minute }} {{ message.message_date.day }}/{{ message.message_date.month }}/{{ message.message_date.year }}</p>
                </div>
            </li>
            <div id="modal{{ loop.index }}" class="modal">
                <div class="modal-content">
                    <h4>{{ user.username }}</h4>
                    <p>Are you sure you want to delete this message from {{ message.user_name }}?</p>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
                    <a href="{{ url_for('delete_message', message_id=message._id) }}" class="waves-effect waves-red btn-flat">Delete</a>
                </div>
            </div>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}